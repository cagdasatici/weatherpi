#:kivy 2.0.0

<ForecastCard>:
    size_hint: None, None
    size: dp(90), dp(120)
    padding: dp(8)
    spacing: dp(4)
    canvas.before:
        Color:
            rgba: 1, 1, 1, 0.95
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [18,]
        Color:
            rgba: 0.85, 0.9, 1, 0.18
        RoundedRectangle:
            pos: self.pos
            size: self.size
            radius: [18,]
    BoxLayout:
        orientation: 'vertical'
        spacing: dp(2)
        size: self.size
        pos: self.pos
        Label:
            text: root.date
            font_size: '14sp'
            color: 0.25, 0.25, 0.35, 1
            bold: True
            size_hint_y: None
            height: dp(18)
        Image:
            source: f'icons/{root.icon}.png'
            size_hint_y: None
            height: dp(36)
        Label:
            text: root.temp
            font_size: '18sp'
            color: 0.2, 0.2, 0.3, 1
            size_hint_y: None
            height: dp(22)
        Label:
            text: root.rain_chance
            font_size: '12sp'
            color: 0.4, 0.6, 1, 1
            size_hint_y: None
            height: dp(16)

<WeatherPage>:
    BoxLayout:
        orientation: 'vertical'
        canvas.before:
            Color:
                rgba: 1, 1, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size
            Color:
                rgba: 0.92, 0.97, 1, 1
            Rectangle:
                pos: self.pos
                size: (self.size[0], self.size[1]/2)
            
        BoxLayout:
            size_hint_y: 0.35
            padding: '20dp'
            spacing: '10dp'
            
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: 0.6
                
                Label:
                    text: root.date_time
                    font_size: '24sp'
                    color: 0.2, 0.2, 0.3, 1
                    text_size: self.size
                    halign: 'left'
                    valign: 'bottom'
                
                BoxLayout:
                    orientation: 'horizontal'
                    
                    Label:
                        text: root.current_temp
                        font_size: '72sp'
                        color: 0.2, 0.2, 0.3, 1
                        text_size: self.size
                        halign: 'left'
                        valign: 'top'
                    
                    Image:
                        source: f'icons/{root.weather_icon}.png'
                        size_hint_x: 0.3
            
            BoxLayout:
                orientation: 'vertical'
                size_hint_x: 0.4
                
                Label:
                    text: root.condition
                    font_size: '24sp'
                    color: 0.2, 0.2, 0.3, 1
                
                BoxLayout:
                    orientation: 'horizontal'
                    
                    Label:
                        text: root.min_temp
                        color: 0.4, 0.7, 1, 1  # Cool blue for min
                    
                    Label:
                        text: root.max_temp
                        color: 1, 0.4, 0.4, 1  # Warm red for max
                
                Label:
                    text: root.feels_like
                    font_size: '18sp'
                    color: 0.4, 0.4, 0.5, 1
        
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: 0.65
            padding: '10dp'
            spacing: '6dp'
            
            WeatherGraph:
                id: forecast_graph
                size_hint_y: 0.38
                background_color: 0.95, 0.97, 1, 0
                padding: '8'
            
            GridLayout:
                size_hint_y: 0.62
                cols: 5
                spacing: '8dp'
                padding: [dp(10), 0, dp(10), 0]
                
                ForecastCard:
                    date: root.forecast_data[0]['date'] if root.forecast_data else '--'
                    temp: root.forecast_data[0]['temp'] if root.forecast_data else '--'
                    condition: root.forecast_data[0]['condition'] if root.forecast_data else ''
                    icon: root.forecast_data[0]['icon'] if root.forecast_data else 'sun'
                    rain_chance: root.forecast_data[0]['rain_chance'] if root.forecast_data else '0%'
                
                ForecastCard:
                    date: root.forecast_data[1]['date'] if len(root.forecast_data) > 1 else '--'
                    temp: root.forecast_data[1]['temp'] if len(root.forecast_data) > 1 else '--'
                    condition: root.forecast_data[1]['condition'] if len(root.forecast_data) > 1 else ''
                    icon: root.forecast_data[1]['icon'] if len(root.forecast_data) > 1 else 'sun'
                    rain_chance: root.forecast_data[1]['rain_chance'] if len(root.forecast_data) > 1 else '0%'
                
                ForecastCard:
                    date: root.forecast_data[2]['date'] if len(root.forecast_data) > 2 else '--'
                    temp: root.forecast_data[2]['temp'] if len(root.forecast_data) > 2 else '--'
                    condition: root.forecast_data[2]['condition'] if len(root.forecast_data) > 2 else ''
                    icon: root.forecast_data[2]['icon'] if len(root.forecast_data) > 2 else 'sun'
                    rain_chance: root.forecast_data[2]['rain_chance'] if len(root.forecast_data) > 2 else '0%'
                
                ForecastCard:
                    date: root.forecast_data[3]['date'] if len(root.forecast_data) > 3 else '--'
                    temp: root.forecast_data[3]['temp'] if len(root.forecast_data) > 3 else '--'
                    condition: root.forecast_data[3]['condition'] if len(root.forecast_data) > 3 else ''
                    icon: root.forecast_data[3]['icon'] if len(root.forecast_data) > 3 else 'sun'
                    rain_chance: root.forecast_data[3]['rain_chance'] if len(root.forecast_data) > 3 else '0%'
                
                ForecastCard:
                    date: root.forecast_data[4]['date'] if len(root.forecast_data) > 4 else '--'
                    temp: root.forecast_data[4]['temp'] if len(root.forecast_data) > 4 else '--'
                    condition: root.forecast_data[4]['condition'] if len(root.forecast_data) > 4 else ''
                    icon: root.forecast_data[4]['icon'] if len(root.forecast_data) > 4 else 'sun'
                    rain_chance: root.forecast_data[4]['rain_chance'] if len(root.forecast_data) > 4 else '0%'

<CalendarPage>:
    Label:
        text: 'Calendar Page\nSwipe left for Weather'

<BlankPage>:
    Label:
        text: 'Blank Page\nSwipe right for Weather'